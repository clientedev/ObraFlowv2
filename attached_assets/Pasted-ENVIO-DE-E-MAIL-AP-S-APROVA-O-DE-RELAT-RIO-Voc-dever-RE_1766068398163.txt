ENVIO DE E-MAIL AP√ìS APROVA√á√ÉO DE RELAT√ìRIO

Voc√™ dever√° REMOVER COMPLETAMENTE qualquer l√≥gica existente de envio de e-mails no projeto antes de iniciar esta implementa√ß√£o.
‚ö†Ô∏è N√£o altere nenhuma outra funcionalidade do sistema, apenas a l√≥gica de envio de e-mail relacionada a relat√≥rios.

üéØ OBJETIVO DA FUNCIONALIDADE

Implementar um envio autom√°tico de e-mail simples e unidirecional (n√£o-reply) sempre que um relat√≥rio for APROVADO, independentemente de ser:

Relat√≥rio Normal

Relat√≥rio Express

A aprova√ß√£o √© o √∫nico gatilho para o envio.

üîÅ MOMENTO DO DISPARO

O envio de e-mail deve ocorrer imediatamente ap√≥s a confirma√ß√£o da aprova√ß√£o do relat√≥rio, dentro do fluxo j√° existente de aprova√ß√£o, sem duplicar eventos ou gerar m√∫ltiplos envios.

üë• DESTINAT√ÅRIOS DO E-MAIL

O sistema deve identificar e enviar o e-mail para TODAS as pessoas relacionadas ao relat√≥rio, incluindo obrigatoriamente:

Pessoa que criou o relat√≥rio

Aprovador global

Todos os acompanhantes da visita vinculados √† obra/relat√≥rio

‚û°Ô∏è Cada destinat√°rio deve receber um e-mail individual (n√£o usar CC ou BCC).

‚úâÔ∏è CONTA DE ENVIO (FIXA)

O e-mail ser√° enviado sempre a partir da seguinte conta:

E-mail: relatorios@elpconsultoria.eng.br

Senha: 1234567890

Essa conta deve ser usada apenas para envio (no-reply).

üßæ CONTE√öDO DO E-MAIL (PADR√ÉO)

O conte√∫do deve ser padronizado, simples e profissional.

Assunto:
Relat√≥rio aprovado ‚Äì Obra {NOME_DA_OBRA}

Corpo do e-mail (texto simples):
Ol√° {NOME_DO_DESTINAT√ÅRIO},

O relat√≥rio da obra "{NOME_DA_OBRA}" foi aprovado em {DATA_DA_APROVA√á√ÉO}.

Segue em anexo o arquivo PDF do relat√≥rio aprovado.

Este √© um e-mail autom√°tico.  
Por favor, n√£o responda este e-mail.


üîπ O sistema deve puxar dinamicamente:

Nome do destinat√°rio

Nome da obra

Data da aprova√ß√£o

üìé ANEXO OBRIGAT√ìRIO

Anexar obrigatoriamente o PDF do relat√≥rio aprovado

O PDF deve ser o mesmo arquivo oficial gerado pelo sistema

Nome do arquivo deve ser claro e relacionado √† obra

‚öôÔ∏è REGRAS DE IMPLEMENTA√á√ÉO

N√£o exigir resposta do usu√°rio

N√£o permitir reply (e-mail informativo)

Garantir que:

Um relat√≥rio aprovado ‚Üí um envio por destinat√°rio

N√£o haja envio duplicado

Caso algum destinat√°rio n√£o possua e-mail v√°lido:

O envio para os demais n√£o deve falhar

O sistema n√£o deve quebrar o fluxo de aprova√ß√£o

üö´ O QUE N√ÉO FAZER

N√£o alterar fluxo de aprova√ß√£o

N√£o alterar gera√ß√£o de PDF

N√£o alterar regras de neg√≥cio existentes

N√£o reutilizar nenhuma l√≥gica antiga de e-mail

N√£o criar novas telas ou campos

‚úÖ RESULTADO ESPERADO

Ao final da implementa√ß√£o:

Toda aprova√ß√£o de relat√≥rio (normal ou express) dispara corretamente o envio

Todos os envolvidos recebem seu e-mail personalizado

O PDF correto √© enviado em anexo

Nenhuma outra funcionalidade do sistema √© impactada