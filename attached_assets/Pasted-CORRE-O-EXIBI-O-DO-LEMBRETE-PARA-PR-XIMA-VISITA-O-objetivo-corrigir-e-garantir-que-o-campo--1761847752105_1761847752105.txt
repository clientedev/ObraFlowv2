CORRE√á√ÉO ‚Äî EXIBI√á√ÉO DO ‚ÄúLEMBRETE PARA PR√ìXIMA VISITA‚Äù

O objetivo √© corrigir e garantir que o campo ‚ÄúLembrete para pr√≥xima visita‚Äù funcione corretamente ao criar um novo relat√≥rio de uma obra.

üß© Comportamento Esperado

Quando um relat√≥rio anterior (ex: REL-0007) possui o campo ‚ÄúLembrete para pr√≥xima visita‚Äù preenchido:

Ao criar um novo relat√≥rio da mesma obra (ex: REL-0008), esse lembrete deve ser automaticamente exibido no topo da se√ß√£o do formul√°rio, antes do checklist.

O lembrete deve aparecer dentro de um card amarelo de aviso, no padr√£o visual do sistema (bg-warning / alert-warning).

O lembrete exibido √© somente informativo ‚Äî o usu√°rio pode fech√°-lo manualmente ou ignor√°-lo.

Caso n√£o exista lembrete anterior, o card n√£o deve ser exibido.

üß© L√≥gica de Funcionamento
Backend

Criar (ou ajustar) endpoint:

GET /relatorios/ultimo-lembrete?obra_id=<id>


Retornar:

{
  "lembrete": "Verificar drenagem e seguran√ßa nos fundos do terreno.",
  "relatorio_origem": "REL-0007",
  "data_relatorio": "2025-10-25"
}


Esse endpoint deve buscar o relat√≥rio mais recente da obra que contenha o campo lembrete_proxima_visita preenchido.

Caso nenhum lembrete exista, retornar { "lembrete": null }.

Frontend

Assim que o usu√°rio selecionar a obra no campo Projeto, al√©m de carregar n√∫mero e checklist, deve tamb√©m:

GET /relatorios/ultimo-lembrete?obra_id=<id>


Caso a resposta contenha um lembrete v√°lido, renderizar um card amarelo acima da √°rea ‚ÄúChecklist da Obra‚Äù com:

√çcone de aviso ‚ö†Ô∏è

T√≠tulo: ‚ÄúLembrete do √∫ltimo relat√≥rio (REL-0007)‚Äù

Texto com o conte√∫do do lembrete.

Exemplo de UI:

<div class="alert alert-warning mt-3">
  <strong>‚ö†Ô∏è Lembrete do √∫ltimo relat√≥rio (REL-0007):</strong><br>
  Verificar drenagem e seguran√ßa nos fundos do terreno.
</div>

üß© Banco de Dados (se necess√°rio)

Garantir que a tabela relatorios contenha o campo:

lembrete_proxima_visita TEXT NULL


Caso n√£o exista, criar via Alembic automaticamente (n√£o precisa exibir c√≥digo).

‚úÖ Crit√©rios de Aceita√ß√£o

Ao selecionar uma obra com lembrete anterior ‚Üí card amarelo aparece com conte√∫do correto.

Ao selecionar obra sem lembrete anterior ‚Üí card n√£o aparece.

Ao criar novo relat√≥rio ‚Üí campo ‚ÄúLembrete para pr√≥xima visita‚Äù continua opcional.

Nenhum erro no console do navegador ou backend.

Layout responsivo, mantendo o padr√£o visual atual do sistema.