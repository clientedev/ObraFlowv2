CorreÃ§Ã£o â€“ SeÃ§Ã£o â€œAcompanhantes da Visitaâ€ no RelatÃ³rio

Precisamos ajustar o carregamento e exibiÃ§Ã£o dos funcionÃ¡rios da obra no modal "Adicionar Acompanhante" e corrigir problemas de layout/botÃµes quebrados.

âœ… Problema Atual

No dropdown "Selecionar FuncionÃ¡rio", os nomes estÃ£o aparecendo como:

undefined â€“ NÃ£o informado


Isso indica que os dados nÃ£o estÃ£o sendo mapeados corretamente no frontend ou nÃ£o estÃ£o sendo enviados corretamente pelo backend.

Os botÃµes â€œAdicionarâ€ e â€œCancelarâ€ no modal estÃ£o com quebra de layout (texto cortado ou desalinhado).

âœ… O que deve ser feito
ğŸ”§ Backend (se necessÃ¡rio)

Verificar se a rota que retorna os funcionÃ¡rios da obra estÃ¡ enviando os campos corretos.

Os dados devem ser retornados assim:

[
  {
    "id": 12,
    "nome": "Carlos Marques",
    "cargo": "Engenheiro Civil"
  },
  {
    "id": 19,
    "nome": "Bruna Silva",
    "cargo": "TÃ©cnica de Obras"
  }
]


Caso o funcionÃ¡rio nÃ£o tenha cargo, retornar "cargo": "NÃ£o informado" para evitar undefined.

ğŸ¨ Frontend â€“ CorreÃ§Ãµes

Popular corretamente o select de funcionÃ¡rios usando nome + cargo:

Carlos Marques â€“ Engenheiro Civil


ou, se nÃ£o tiver cargo:

Carlos Marques â€“ NÃ£o informado


Remover qualquer valor "undefined" no select.

Garantir que os dados carreguem apenas os funcionÃ¡rios da obra selecionada.

Corrigir o layout do modal:

Ajustar largura dos botÃµes para evitar quebra de texto.

Garantir responsividade no modal.

Padronizar fonte e alinhamento.

Se nÃ£o houver funcionÃ¡rios vinculados Ã  obra, exibir mensagem informativa:

Nenhum funcionÃ¡rio cadastrado para esta obra.


E desabilitar o botÃ£o "Adicionar".

âœ… Regras

NÃ£o quebrar nada jÃ¡ implementado na parte de acompanhantes.

Nenhum campo deve permitir valores undefined ou vazios.

O carregamento deve ser carregado assÃ­ncrono ao selecionar a obra.

âœ… Extras

Ao finalizar:
âœ” Testar modal com 1 funcionÃ¡rio
âœ” Testar modal com vÃ¡rios funcionÃ¡rios
âœ” Testar modal sem nenhum funcionÃ¡rio
âœ” Testar salvar/acrescentar acompanhante sem erro

âœ… Importante

Se for necessÃ¡rio ajuste no banco de dados ou modelo para retornar os dados corretamente, criar a migration Alembic automaticamente conforme o padrÃ£o do projeto (nÃ£o precisa mostrar cÃ³digo no retorno).