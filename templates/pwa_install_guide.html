{% extends "base.html" %}

{% block title %}Como Instalar o App ELP - Guia Completo{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h2 class="mb-0">
                        <i class="fas fa-mobile-alt me-2"></i>
                        Como Instalar o App ELP no seu Dispositivo
                    </h2>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>App Nativo para Android e iOS!</strong><br>
                        O ELP Relat√≥rios pode ser instalado como um aplicativo nativo no seu dispositivo, 
                        funcionando offline e com acesso direto da tela inicial.
                    </div>
                    
                    <!-- Instru√ß√µes para Android -->
                    <div class="mb-5">
                        <h3 class="text-success">
                            <i class="fab fa-android me-2"></i>
                            Android (Chrome/Firefox)
                        </h3>
                        <div class="row">
                            <div class="col-md-6">
                                <ol class="list-group list-group-numbered">
                                    <li class="list-group-item">
                                        <strong>Abra este site no Chrome ou Firefox</strong>
                                        <br><small class="text-muted">Certifique-se de estar usando um navegador compat√≠vel</small>
                                    </li>
                                    <li class="list-group-item">
                                        <strong>Toque no menu (‚ãÆ) do navegador</strong>
                                        <br><small class="text-muted">Localizado no canto superior direito</small>
                                    </li>
                                    <li class="list-group-item">
                                        <strong>Selecione "Instalar app" ou "Adicionar √† tela inicial"</strong>
                                        <br><small class="text-muted">A op√ß√£o pode variar conforme o navegador</small>
                                    </li>
                                    <li class="list-group-item">
                                        <strong>Confirme a instala√ß√£o</strong>
                                        <br><small class="text-muted">O app aparecer√° na sua tela inicial</small>
                                    </li>
                                </ol>
                            </div>
                            <div class="col-md-6">
                                <div class="alert alert-success">
                                    <h6><i class="fas fa-check-circle me-2"></i>Recursos do App Android:</h6>
                                    <ul class="mb-0">
                                        <li>Funciona offline</li>
                                        <li>Acesso direto da tela inicial</li>
                                        <li>Interface em tela cheia</li>
                                        <li>Sincroniza√ß√£o autom√°tica</li>
                                        <li>Notifica√ß√µes push (futuro)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Instru√ß√µes para iOS -->
                    <div class="mb-5">
                        <h3 class="text-primary">
                            <i class="fab fa-apple me-2"></i>
                            iOS (Safari)
                        </h3>
                        <div class="row">
                            <div class="col-md-6">
                                <ol class="list-group list-group-numbered">
                                    <li class="list-group-item">
                                        <strong>Abra este site no Safari</strong>
                                        <br><small class="text-muted">Importante: Funciona apenas no Safari, n√£o em outros navegadores iOS</small>
                                    </li>
                                    <li class="list-group-item">
                                        <strong>Toque no bot√£o de compartilhar (üì§)</strong>
                                        <br><small class="text-muted">Localizado na parte inferior da tela</small>
                                    </li>
                                    <li class="list-group-item">
                                        <strong>Role para baixo e toque em "Adicionar √† Tela de In√≠cio"</strong>
                                        <br><small class="text-muted">Procure pelo √≠cone com um "+"</small>
                                    </li>
                                    <li class="list-group-item">
                                        <strong>Toque em "Adicionar" no canto superior direito</strong>
                                        <br><small class="text-muted">O app aparecer√° na sua tela inicial</small>
                                    </li>
                                </ol>
                            </div>
                            <div class="col-md-6">
                                <div class="alert alert-info">
                                    <h6><i class="fas fa-info-circle me-2"></i>Recursos do App iOS:</h6>
                                    <ul class="mb-0">
                                        <li>Interface nativa iOS</li>
                                        <li>Funciona offline</li>
                                        <li>Acesso direto da tela inicial</li>
                                        <li>Integra√ß√£o com o sistema</li>
                                        <li>Sincroniza√ß√£o em background</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Instru√ß√µes para Desktop -->
                    <div class="mb-5">
                        <h3 class="text-info">
                            <i class="fas fa-desktop me-2"></i>
                            Desktop (Windows/Mac/Linux)
                        </h3>
                        <div class="row">
                            <div class="col-md-6">
                                <ol class="list-group list-group-numbered">
                                    <li class="list-group-item">
                                        <strong>Abra este site no Chrome, Edge ou Firefox</strong>
                                        <br><small class="text-muted">Navegadores modernos suportam instala√ß√£o PWA</small>
                                    </li>
                                    <li class="list-group-item">
                                        <strong>Procure pelo √≠cone de instala√ß√£o na barra de endere√ßos</strong>
                                        <br><small class="text-muted">Geralmente um √≠cone de "+" ou de download</small>
                                    </li>
                                    <li class="list-group-item">
                                        <strong>Clique em "Instalar ELP Relat√≥rios"</strong>
                                        <br><small class="text-muted">Ou use o menu do navegador</small>
                                    </li>
                                    <li class="list-group-item">
                                        <strong>Confirme a instala√ß√£o</strong>
                                        <br><small class="text-muted">O app aparecer√° como programa instalado</small>
                                    </li>
                                </ol>
                            </div>
                            <div class="col-md-6">
                                <div class="alert alert-warning">
                                    <h6><i class="fas fa-exclamation-triangle me-2"></i>Requisitos Desktop:</h6>
                                    <ul class="mb-0">
                                        <li>Navegador moderno (Chrome 73+, Edge 79+, Firefox 90+)</li>
                                        <li>Conex√£o HTTPS ativa</li>
                                        <li>Suporte a Service Workers</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Benef√≠cios -->
                    <div class="mb-4">
                        <h3 class="text-secondary">
                            <i class="fas fa-star me-2"></i>
                            Benef√≠cios do App Instalado
                        </h3>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="card h-100 border-success">
                                    <div class="card-body text-center">
                                        <i class="fas fa-wifi-slash text-success" style="font-size: 2rem;"></i>
                                        <h5 class="card-title mt-3">Funciona Offline</h5>
                                        <p class="card-text">Continue trabalhando mesmo sem internet. Os dados sincronizam automaticamente quando reconectar.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card h-100 border-primary">
                                    <div class="card-body text-center">
                                        <i class="fas fa-rocket text-primary" style="font-size: 2rem;"></i>
                                        <h5 class="card-title mt-3">Acesso R√°pido</h5>
                                        <p class="card-text">Abra diretamente da tela inicial, sem precisar abrir o navegador primeiro.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card h-100 border-info">
                                    <div class="card-body text-center">
                                        <i class="fas fa-mobile-alt text-info" style="font-size: 2rem;"></i>
                                        <h5 class="card-title mt-3">Interface Nativa</h5>
                                        <p class="card-text">Experi√™ncia de app nativo com interface otimizada para cada dispositivo.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Solu√ß√£o de Problemas -->
                    <div class="mb-4">
                        <h3 class="text-warning">
                            <i class="fas fa-wrench me-2"></i>
                            Solu√ß√£o de Problemas
                        </h3>
                        <div class="accordion" id="troubleshootAccordion">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#problem1">
                                        N√£o vejo a op√ß√£o "Instalar app"
                                    </button>
                                </h2>
                                <div id="problem1" class="accordion-collapse collapse" data-bs-parent="#troubleshootAccordion">
                                    <div class="accordion-body">
                                        <ul>
                                            <li>Certifique-se de estar usando um navegador compat√≠vel</li>
                                            <li>Verifique se est√° acessando via HTTPS</li>
                                            <li>Tente recarregar a p√°gina</li>
                                            <li>Limpe o cache do navegador</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#problem2">
                                        O app n√£o funciona offline
                                    </button>
                                </h2>
                                <div id="problem2" class="accordion-collapse collapse" data-bs-parent="#troubleshootAccordion">
                                    <div class="accordion-body">
                                        <ul>
                                            <li>Aguarde o download completo na primeira instala√ß√£o</li>
                                            <li>Verifique se o Service Worker est√° ativo</li>
                                            <li>Acesse as principais p√°ginas uma vez online</li>
                                            <li>Reinicie o app se necess√°rio</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#problem3">
                                        Como desinstalar o app
                                    </button>
                                </h2>
                                <div id="problem3" class="accordion-collapse collapse" data-bs-parent="#troubleshootAccordion">
                                    <div class="accordion-body">
                                        <strong>Android:</strong> Mantenha pressionado o √≠cone do app ‚Üí "Desinstalar"<br>
                                        <strong>iOS:</strong> Mantenha pressionado o √≠cone do app ‚Üí "Remover App"<br>
                                        <strong>Desktop:</strong> Configura√ß√µes do navegador ‚Üí Apps instalados ‚Üí Desinstalar
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Bot√µes de A√ß√£o -->
                    <div class="text-center">
                        <a href="{{ url_for('index') }}" class="btn btn-primary btn-lg me-3">
                            <i class="fas fa-home me-2"></i>
                            Voltar ao App
                        </a>
                        <button class="btn btn-success btn-lg" onclick="window.pwaInstaller?.installApp()" id="install-button">
                            <i class="fas fa-download me-2"></i>
                            Instalar Agora
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Verificar se PWA installer est√° dispon√≠vel
document.addEventListener('DOMContentLoaded', () => {
    const installButton = document.getElementById('install-button');
    
    if (!window.pwaInstaller || !window.pwaInstaller.canShowInstallPrompt()) {
        installButton.disabled = true;
        installButton.innerHTML = '<i class="fas fa-check me-2"></i>App j√° instalado ou n√£o dispon√≠vel';
        installButton.className = 'btn btn-secondary btn-lg';
    }
});
</script>
{% endblock %}