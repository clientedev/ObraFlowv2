# ================================
# RAILWAY ENVIRONMENT VARIABLES
# ================================

# Database (automatically provided by Railway PostgreSQL)
DATABASE_URL=postgresql://user:password@host:port/database

# Security (REQUIRED)
SESSION_SECRET=generate-a-random-secret-key-here

# Email Configuration (OPTIONAL - for report delivery)
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_DEFAULT_SENDER=your-email@gmail.com
MAIL_USE_TLS=true

# Email Encryption (OPTIONAL - for user email passwords)
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
EMAIL_PASSWORD_ENCRYPTION_KEY=your-encryption-key-here

# Railway Environment (automatically set by Railway)
RAILWAY_ENVIRONMENT=production
PORT=5000

# ================================
# FIREBASE CLOUD MESSAGING (FCM)
# ================================

# Opção 1: Arquivo de credenciais (RECOMENDADO)
# Baixe o arquivo firebase_credentials.json do Firebase Console
# → Configurações do projeto → Contas de serviço → Gerar nova chave privada
FIREBASE_CREDENTIALS_PATH=firebase_credentials.json

# Opção 2: Variável de ambiente com JSON completo (ALTERNATIVA)
# Cole todo o conteúdo do arquivo firebase_credentials.json em uma linha
FIREBASE_CONFIG='{"type":"service_account","project_id":"...","private_key":"...","client_email":"..."}'

# ================================
# FIREBASE CONFIG FRONTEND (PÚBLICO)
# Estas variáveis são usadas no frontend JavaScript
# Obtenha em: Firebase Console → Configurações do projeto → Geral → Seus apps
# ================================

FIREBASE_API_KEY=your-api-key-here
FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_STORAGE_BUCKET=your-project.appspot.com
FIREBASE_MESSAGING_SENDER_ID=123456789012
FIREBASE_APP_ID=1:123456789012:web:abc123def456
FIREBASE_VAPID_KEY=your-vapid-key-here

# ================================
# INSTRUÇÕES DE CONFIGURAÇÃO
# ================================

# 1. Criar projeto Firebase:
#    - Acesse: https://console.firebase.google.com/
#    - Crie um novo projeto ou use existente
#    - Ative "Cloud Messaging" no menu lateral

# 2. Obter credenciais do servidor (Backend):
#    - Firebase Console → Configurações (⚙️) → Contas de serviço
#    - Clique em "Gerar nova chave privada"
#    - Baixe o arquivo JSON e salve como firebase_credentials.json
#    - Defina FIREBASE_CREDENTIALS_PATH ou cole conteúdo em FIREBASE_CONFIG

# 3. Obter configuração Web (Frontend):
#    - Firebase Console → Configurações (⚙️) → Geral
#    - Role até "Seus apps" → Adicionar app → Web
#    - Copie as variáveis firebaseConfig
#    - Cole os valores nas variáveis FIREBASE_* acima

# 4. Obter VAPID Key:
#    - Firebase Console → Configurações (⚙️) → Cloud Messaging
#    - Role até "Configuração da Web"
#    - Clique em "Gerar par de chaves" (se não existir)
#    - Copie o valor "Chave do servidor web" para FIREBASE_VAPID_KEY

# 5. Configurar service worker:
#    - Edite static/firebase-messaging-sw.js
#    - Substitua os valores YOUR_* pelas suas credenciais Firebase

# ================================
# TESTE DE PUSH NOTIFICATION
# ================================

# Após configurar, teste com curl:
# curl -X POST https://fcm.googleapis.com/fcm/send \
#  -H "Authorization: key=YOUR_SERVER_KEY" \
#  -H "Content-Type: application/json" \
#  -d '{
#    "to": "USER_FCM_TOKEN",
#    "notification": {
#      "title": "ELP Consultoria",
#      "body": "Push notification funcionando!"
#    }
#  }'
